{"version":3,"file":"ngx-monaco-editor-v2.mjs","sources":["../../../projects/editor/src/lib/config.ts","../../../projects/editor/src/lib/base-editor.ts","../../../projects/editor/src/lib/editor.component.ts","../../../projects/editor/src/lib/diff-editor.component.ts","../../../projects/editor/src/lib/editor.module.ts","../../../projects/editor/src/ngx-monaco-editor-v2.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\r\n\r\nexport const NGX_MONACO_EDITOR_CONFIG = new InjectionToken('NGX_MONACO_EDITOR_CONFIG');\r\n\r\nexport interface NgxMonacoEditorConfig {\r\n  baseUrl?: string;\r\n  requireConfig?: { [key: string]: any; };\r\n  defaultOptions?: { [key: string]: any; };\r\n  monacoRequire?: Function;\r\n  onMonacoLoad?: Function;\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  OnDestroy,\r\n  Output,\r\n  ViewChild,\r\n  inject\r\n} from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { NGX_MONACO_EDITOR_CONFIG, NgxMonacoEditorConfig } from './config';\r\n\r\nlet loadedMonaco = false;\r\nlet loadPromise: Promise<void>;\r\n\r\n@Component({\r\n  template: ''\r\n})\r\nexport abstract class BaseEditor implements AfterViewInit, OnDestroy {\r\n  config = inject<NgxMonacoEditorConfig>(NGX_MONACO_EDITOR_CONFIG);\r\n\r\n  @Input('insideNg')\r\n  set insideNg(insideNg: boolean) {\r\n    this._insideNg = insideNg;\r\n    if (this._editor) {\r\n      this._editor.dispose();\r\n      this.initMonaco(this._options, this.insideNg);\r\n    }\r\n  }\r\n\r\n  get insideNg(): boolean {\r\n    return this._insideNg;\r\n  }\r\n\r\n  @ViewChild('editorContainer', { static: true }) _editorContainer: ElementRef;\r\n  @Output() onInit = new EventEmitter<any>();\r\n  protected _editor: any;\r\n  protected _options: any;\r\n  protected _windowResizeSubscription: Subscription;\r\n  private _insideNg: boolean = false;\r\n\r\n  ngAfterViewInit(): void {\r\n    if (loadedMonaco) {\r\n      // Wait until monaco editor is available\r\n      loadPromise.then(() => {\r\n        this.initMonaco(this._options, this.insideNg);\r\n      });\r\n    } else {\r\n      loadedMonaco = true;\r\n      loadPromise = new Promise<void>((resolve: any) => {\r\n        let baseUrl = this.config.baseUrl;\r\n        // ensure backward compatibility\r\n        if (baseUrl === \"assets\" || !baseUrl) {\r\n          baseUrl = \"./assets/monaco/min/vs\";\r\n        }\r\n        if (typeof ((<any>window).monaco) === 'object') {\r\n          this.initMonaco(this._options, this.insideNg);\r\n          resolve();\r\n          return;\r\n        }\r\n        const onGotAmdLoader: any = (require?: any) => {\r\n          let usedRequire = require || (<any>window).require;\r\n          let requireConfig = { paths: { vs: `${baseUrl}` } };\r\n          Object.assign(requireConfig, this.config.requireConfig || {});\r\n\r\n          // Load monaco\r\n          usedRequire.config(requireConfig);\r\n          usedRequire([`vs/editor/editor.main`], () => {\r\n            if (typeof this.config.onMonacoLoad === 'function') {\r\n              this.config.onMonacoLoad();\r\n            }\r\n            this.initMonaco(this._options, this.insideNg);\r\n            resolve();\r\n          });\r\n        };\r\n\r\n        if (this.config.monacoRequire) {\r\n          onGotAmdLoader(this.config.monacoRequire);\r\n        // Load AMD loader if necessary\r\n        } else if (!(<any>window).require) {\r\n          const loaderScript: HTMLScriptElement = document.createElement('script');\r\n          loaderScript.type = 'text/javascript';\r\n          loaderScript.src = `${baseUrl}/loader.js`;\r\n          loaderScript.addEventListener('load', () => { onGotAmdLoader(); });\r\n          document.body.appendChild(loaderScript);\r\n        // Load AMD loader without over-riding node's require\r\n        } else if (!(<any>window).require.config) {\r\n            var src = `${baseUrl}/loader.js`;\r\n\r\n            var loaderRequest = new XMLHttpRequest();\r\n            loaderRequest.addEventListener(\"load\", () => {\r\n                let scriptElem = document.createElement('script');\r\n                scriptElem.type = 'text/javascript';\r\n                scriptElem.text = [\r\n                    // Monaco uses a custom amd loader that over-rides node's require.\r\n                    // Keep a reference to node's require so we can restore it after executing the amd loader file.\r\n                    'var nodeRequire = require;',\r\n                    loaderRequest.responseText.replace('\"use strict\";', ''),\r\n                    // Save Monaco's amd require and restore Node's require\r\n                    'var monacoAmdRequire = require;',\r\n                    'require = nodeRequire;',\r\n                    'require.nodeRequire = require;'\r\n                ].join('\\n');\r\n                document.body.appendChild(scriptElem);\r\n                onGotAmdLoader((<any>window).monacoAmdRequire);\r\n            });\r\n            loaderRequest.open(\"GET\", src);\r\n            loaderRequest.send();\r\n        } else {\r\n          onGotAmdLoader();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  protected abstract initMonaco(options: any, insideNg: boolean): void;\r\n\r\n  ngOnDestroy() {\r\n    if (this._windowResizeSubscription) {\r\n      this._windowResizeSubscription.unsubscribe();\r\n    }\r\n    if (this._editor) {\r\n      this._editor.dispose();\r\n      this._editor = undefined;\r\n    }\r\n  }\r\n}\r\n","import { ChangeDetectionStrategy, Component, forwardRef, inject, Input, NgZone } from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { fromEvent } from 'rxjs';\r\n\r\nimport { BaseEditor } from './base-editor';\r\nimport { NgxEditorModel } from './types';\r\n\r\ndeclare var monaco: any;\r\n\r\n@Component({\r\n  standalone: true,\r\n  selector: 'ngx-monaco-editor',\r\n  template: '<div class=\"editor-container\" #editorContainer></div>',\r\n  styles: [`\r\n      :host {\r\n          display: block;\r\n          height: 200px;\r\n      }\r\n\r\n      .editor-container {\r\n          width: 100%;\r\n          height: 98%;\r\n      }\r\n  `],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => EditorComponent),\r\n    multi: true\r\n  }]\r\n})\r\nexport class EditorComponent extends BaseEditor implements ControlValueAccessor {\r\n  private zone = inject(NgZone);\r\n  private _value: string = '';\r\n\r\n  propagateChange = (_: any) => {};\r\n  onTouched = () => {};\r\n\r\n  @Input('options')\r\n  set options(options: any) {\r\n    this._options = Object.assign({}, this.config.defaultOptions, options);\r\n    if (this._editor) {\r\n      this._editor.dispose();\r\n      this.initMonaco(options, this.insideNg);\r\n    }\r\n  }\r\n\r\n  get options(): any {\r\n    return this._options;\r\n  }\r\n\r\n  @Input('model')\r\n  set model(model: NgxEditorModel) {\r\n    this.options.model = model;\r\n    if (this._editor) {\r\n      this._editor.dispose();\r\n      this.initMonaco(this.options, this.insideNg);\r\n    }\r\n  }\r\n\r\n  writeValue(value: any): void {\r\n    this._value = value || '';\r\n    // Fix for value change while dispose in process.\r\n    setTimeout(() => {\r\n      if (this._editor && !this.options.model) {\r\n        this._editor.setValue(this._value);\r\n      }\r\n    });\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.propagateChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  protected initMonaco(options: any, insideNg: boolean): void {\r\n\r\n    const hasModel = !!options.model;\r\n\r\n    if (hasModel) {\r\n      const model = monaco.editor.getModel(options.model.uri || '');\r\n      if (model) {\r\n        options.model = model;\r\n        options.model.setValue(this._value);\r\n      } else {\r\n        options.model = monaco.editor.createModel(options.model.value, options.model.language, options.model.uri);\r\n      }\r\n    }\r\n\r\n    if (insideNg) {\r\n      this._editor = monaco.editor.create(this._editorContainer.nativeElement, options);\r\n    } else {\r\n      this.zone.runOutsideAngular(() => {\r\n        this._editor = monaco.editor.create(this._editorContainer.nativeElement, options);\r\n      })\r\n    }\r\n\r\n    if (!hasModel) {\r\n      this._editor.setValue(this._value);\r\n    }\r\n\r\n    this._editor.onDidChangeModelContent((e: any) => {\r\n      const value = this._editor.getValue();\r\n\r\n      // value is not propagated to parent when executing outside zone.\r\n      this.zone.run(() => {\r\n        this.propagateChange(value);\r\n        this._value = value;\r\n      });\r\n    });\r\n\r\n    this._editor.onDidBlurEditorWidget(() => {\r\n      this.onTouched();\r\n    });\r\n\r\n    // refresh layout on resize event.\r\n    if (this._windowResizeSubscription) {\r\n      this._windowResizeSubscription.unsubscribe();\r\n    }\r\n    this._windowResizeSubscription = fromEvent(window, 'resize').subscribe(() => this._editor.layout());\r\n    this.onInit.emit(this._editor);\r\n  }\r\n\r\n}\r\n","import { ChangeDetectionStrategy, Component, Input, NgZone, inject } from '@angular/core';\r\nimport { fromEvent } from 'rxjs';\r\n\r\nimport { BaseEditor } from './base-editor';\r\nimport { DiffEditorModel } from './types';\r\n\r\ndeclare var monaco: any;\r\n\r\n@Component({\r\n  standalone: true,\r\n  selector: 'ngx-monaco-diff-editor',\r\n  template: '<div class=\"editor-container\" #editorContainer></div>',\r\n  styles: [`\r\n    :host {\r\n      display: block;\r\n      height: 200px;\r\n    }\r\n\r\n    .editor-container {\r\n      width: 100%;\r\n      height: 98%;\r\n    }\r\n  `],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DiffEditorComponent extends BaseEditor {\r\n  private zone = inject(NgZone);\r\n\r\n  _originalModel: DiffEditorModel;\r\n  _modifiedModel: DiffEditorModel;\r\n\r\n  @Input('options')\r\n  set options(options: any) {\r\n    this._options = Object.assign({}, this.config.defaultOptions, options);\r\n    if (this._editor) {\r\n      this._editor.dispose();\r\n      this.initMonaco(options, this.insideNg);\r\n    }\r\n  }\r\n\r\n  get options(): any {\r\n    return this._options;\r\n  }\r\n\r\n  @Input('originalModel')\r\n  set originalModel(model: DiffEditorModel) {\r\n    this._originalModel = model;\r\n    if (this._editor) {\r\n      this._editor.dispose();\r\n      this.initMonaco(this.options, this.insideNg);\r\n    }\r\n  }\r\n\r\n  @Input('modifiedModel')\r\n  set modifiedModel(model: DiffEditorModel) {\r\n    this._modifiedModel = model;\r\n    if (this._editor) {\r\n      this._editor.dispose();\r\n      this.initMonaco(this.options, this.insideNg);\r\n    }\r\n  }\r\n\r\n  protected initMonaco(options: any, insideNg: boolean): void {\r\n\r\n    if (!this._originalModel || !this._modifiedModel) {\r\n      throw new Error('originalModel or modifiedModel not found for ngx-monaco-diff-editor');\r\n    }\r\n\r\n    this._originalModel.language = this._originalModel.language || options.language;\r\n    this._modifiedModel.language = this._modifiedModel.language || options.language;\r\n\r\n    let originalModel = monaco.editor.createModel(this._originalModel.code, this._originalModel.language);\r\n    let modifiedModel = monaco.editor.createModel(this._modifiedModel.code, this._modifiedModel.language);\r\n\r\n    this._editorContainer.nativeElement.innerHTML = '';\r\n    const theme = options.theme;\r\n\r\n    if (insideNg) {\r\n      this._editor = monaco.editor.createDiffEditor(this._editorContainer.nativeElement, options);\r\n    } else {\r\n      this.zone.runOutsideAngular(() => {\r\n        this._editor = monaco.editor.createDiffEditor(this._editorContainer.nativeElement, options);\r\n      })\r\n    }\r\n\r\n    options.theme = theme;\r\n    this._editor.setModel({\r\n      original: originalModel,\r\n      modified: modifiedModel\r\n    });\r\n\r\n    // refresh layout on resize event.\r\n    if (this._windowResizeSubscription) {\r\n      this._windowResizeSubscription.unsubscribe();\r\n    }\r\n    this._windowResizeSubscription = fromEvent(window, 'resize').subscribe(() => this._editor.layout());\r\n    this.onInit.emit(this._editor);\r\n  }\r\n\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { ModuleWithProviders, NgModule, makeEnvironmentProviders } from '@angular/core';\r\n\r\nimport { NGX_MONACO_EDITOR_CONFIG, NgxMonacoEditorConfig } from './config';\r\nimport { DiffEditorComponent } from './diff-editor.component';\r\nimport { EditorComponent } from './editor.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    EditorComponent,\r\n    DiffEditorComponent\r\n  ],\r\n  exports: [\r\n    EditorComponent,\r\n    DiffEditorComponent\r\n  ]\r\n})\r\nexport class MonacoEditorModule {\r\n  public static forRoot(config: NgxMonacoEditorConfig = {}): ModuleWithProviders<MonacoEditorModule> {\r\n    return {\r\n      ngModule: MonacoEditorModule,\r\n      providers: [\r\n        { provide: NGX_MONACO_EDITOR_CONFIG, useValue: config }\r\n      ]\r\n    };\r\n  }\r\n}\r\n\r\nexport function provideMonacoEditor(config: NgxMonacoEditorConfig = {}) {\r\n  return makeEnvironmentProviders([\r\n    { provide: NGX_MONACO_EDITOR_CONFIG, useValue: config }\r\n  ]);\r\n}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}